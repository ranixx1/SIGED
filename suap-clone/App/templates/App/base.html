{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}SUAP Clone{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        .sidebar-item {
            @apply flex items-center gap-3 text-gray-300 hover:text-white transition p-2 rounded;
        }
        .sidebar-item.active {
            @apply bg-blue-700 text-white;
        }
        .submenu-item {
            @apply text-gray-400 hover:text-white transition p-2 rounded text-sm;
        }
        .card {
            @apply bg-white rounded-lg shadow-md overflow-hidden border border-gray-200;
        }
        .card-header {
            @apply bg-blue-600 text-white px-4 py-2 font-semibold;
        }
        .card-body {
            @apply p-4;
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body class="flex min-h-screen bg-gray-100 font-sans">

    <!-- Sidebar -->
    <aside id="sidebar" class="bg-blue-800 text-white flex flex-col p-4 shadow-lg transition-all duration-300 ease-in-out w-64 relative z-10">
        <div class="flex items-center justify-between mb-8">
            <h2 id="sidebar-title" class="text-xl font-bold">SUAP</h2>
            <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center text-blue-800 font-bold">
                {% if user.is_authenticated %}
                    {{ user.first_name|first }}{{ user.last_name|first }}
                {% else %}
                    ?
                {% endif %}
            </div>
        </div>

        <nav class="flex flex-col gap-1 flex-1">
            <a href="{% url 'home' %}" class="sidebar-item {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
                <span class="material-icons">home</span>
                <span class="sidebar-text">Página Inicial</span>
            </a>
            <!-- Submenus omitidos por brevidade, copie os que quiser -->
            <div class="mt-auto">
                <a href="#" class="sidebar-item">
                    <span class="material-icons">settings</span>
                    <span class="sidebar-text">Configurações</span>
                </a>
                <a href="{% url 'logout' %}" class="sidebar-item">
                    <span class="material-icons">logout</span>
                    <span class="sidebar-text">Sair</span>
                </a>
            </div>
        </nav>

        <button onclick="toggleSidebar()" id="toggleBtn"
            class="absolute top-1/2 -right-3 transform -translate-y-1/2 bg-white text-blue-800 rounded-full w-6 h-6 flex items-center justify-center shadow-md border-none cursor-pointer">
            <span class="material-icons text-sm">chevron_left</span>
        </button>
    </aside>

    <!-- Conteúdo principal -->
    <main class="flex-1 p-6 overflow-auto">
        <div class="max-w-7xl mx-auto">
            {% block content %}
            <!-- Conteúdo das páginas vai aqui -->
            {% endblock %}
        </div>
    </main>

    <script>
        // toggleSidebar, toggleSubmenu e outros scripts aqui...
        function toggleSubmenu(id) {
            const el = document.getElementById(id);
            el.classList.toggle("hidden");
            const icon = document.querySelector(`[data-submenu="${id}"]`);
            icon.textContent = icon.textContent === 'expand_more' ? 'chevron_right' : 'expand_more';
        }

        function toggleSidebar() {
            const sidebar = document.getElementById("sidebar");
            const isExpanded = sidebar.classList.contains("w-64");

            sidebar.classList.toggle("w-64", !isExpanded);
            sidebar.classList.toggle("w-20", isExpanded);

            document.querySelectorAll(".sidebar-text").forEach(el => {
                el.classList.toggle("hidden", isExpanded);
            });

            document.querySelectorAll(".submenu").forEach(el => {
                if(isExpanded) return;
                el.classList.add("hidden");
            });

            document.getElementById("sidebar-title").classList.toggle("hidden", isExpanded);
            document.getElementById("toggleBtn").innerHTML = isExpanded ? 
                '<span class="material-icons">chevron_left</span>' : 
                '<span class="material-icons">chevron_right</span>';
        }
    </script>
</body>
</html>
